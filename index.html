<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Raster Plot: Net Radiation</title>
    <!--Load d3.js-->
    <script src="https://d3js.org/d3.v5.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v3.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <style>
    </style>
    <br>
    <br>
    <header style="text-align: center;"><b>Hypothesis:</b> There are larger numbers of wind turbine farms around state
        capitals
        compared to the rest of the United States.</header>
    <header style="text-align: center;"><b>Source for Wind Turbines:</b> <a
            href="https://www.kaggle.com/datasets/txtrouble/wind-farms?resource=download">Wind-Farms</a> <b>Source for
            US
            Geojson:</b> <a href="https://eric.clst.org/tech/usgeojson/">US Geojson</a></header>
</head>

<body>
    <br>
    <br>
    <hr>
    <div id="buttons" style="text-align: left;">
        <div class="btn-group">
            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                Select a Month <span class="caret"></span>
            </button>
            <ul class="dropdown-menu btn-block">
                <li><a class="dropdown-item" href="#" onclick="update('Jan')">January</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Feb')">February</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Mar')">March</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Apr')">April</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('May')">May</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Jun')">June</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Jul')">July</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Aug')">August</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Sep')">September</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Oct')">October</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Nov')">November</a></li>
                <li><a class="dropdown-item" href="#" onclick="update('Dec')">December</a></li>
            </ul>
        </div>
    <br>
    <div id="Origin" style="text-align: center;">
        <svg id="World" width="1440" height="720"></svg>
    </div>
    <script type="text/javascript">
        const svg = d3.select("#World"),
            width = +svg.attr("width"),
            height = +svg.attr("height");

        svg.append("g")
            .attr("id", "continents");

        svg.append("g")
            .attr("id", "radiation")

        var imageChange = "radiation2.png"

        var canvas = d3.select("#radiation")
            .attr("width", width)
            .attr("height", height)

        let projection = d3.geoMercator()
            .scale(230)
            .translate([width / 2, height / 2]);

        // Load external data and boot
        d3.json("world.json").then(function (data) {

            // Draw the map
            svg.select("#continents")
                .selectAll("path")
                .data(data.features)
                .join("path")
                .attr("fill", "white")
                .attr("d", d3.geoPath()
                    .projection(projection)
                )
                .style("stroke", "black")

            svg.select('#radiation').append("image")
                .attr("xlink:href", imageChange)
                .attr("class", "raster")
                // preserve the aspect ratio
                .attr("width", width)
                .attr("height", height)
                .attr("opacity", 0.85)
        })

        function update(month) {
            imageChange = "radiation.TIFF"
            d3.select("#image")
                .attr("xlink:href", imageChange)
        }

        canvis = svg.select("#canvas")

        var context = canvis.node().getContext('2d')

        var image = new Image()
        image.onload = function () {
            context.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height)
        }
        image.src = 'Radiation.png'
    </script>
</body>

</html>